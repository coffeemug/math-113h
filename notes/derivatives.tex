
\section{Derivatives, Part I (Fundamentals)}

\subsection{Formal definitions}

\textbf{Definition:} the \textit{derivative} at $a$ of a function $f$,
denoted $f'(a)$, is defined as:
\[f'(a)=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}\]

There are \textit{three intuitions} to convey about the derivative:
\begin{itemize}
\item \textit{Algebraic interpretation}. The derivative tells how
  $f(a+h)$, the value of $f$ as small distance from $a$, changes
  relative to $f(a)$ as $h$ becomes very small.
\item \textit{Geometric interpretation}. Draw a line through points
  $(a, f(a))$ and $(a+h, f(a+h))$ for some small $h$. Then make $h$
  ``infinitely small''. Our $f'(a)$ is the slope of that line. The
  tagent line is a \textit{linear approximation} of $f$ near $a$.
\item \textit{Physics interpretation}. Suppose $f(t)$ maps time to
  position of a car on a road (or of any object on a straight line).
  Suppose you want to know the average velocity between any two points
  in time $t_1, t_2$. If $h=t_2-t_1$ then the average velocity is
  $\frac{f(t_1+h)-f(t_1)}{h}$. This is the quotient of the derivative!
  Only with $h$ ``reduced to an infinitesimal'', producing
  \textit{instantanious velocity}.
\end{itemize}

\textbf{Definition:} $f$ is called \textit{differentiable} at $a$ if
the limit $f'(a)$ exists.

\vs

The notation $f'(a)$ suggests $f'$ is a function. Indeed, we define
$f'$ as follows. Its domain is the set of all numbers $a$ where $f$ is
differentiable, and its value at such a point $a$ is the limit above.
Not surprisingly, we call $f'$ the \textit{derivative} of $f$. Note
that the domain of $f'$ could be much smaller than the domain of $f$.

\vs

We can apply the definition of the derivative to $f'$ yielding the
\textit{second derivative} $(f')'$, denoted $f''$ or $f^{(2)}$. The
domain of $f''$ is all points $a$ such that $f'$ is differentiable at
$a$. If $f''(a)$ exists, we say $f$ is \textit{twice differentiable}
at $a$.

\subsection{Differentiability implies continuity}\label{diff-implies-cont}

We are about to prove an important theorem-- that differentiability
implies continuity. To do that, we begin with a convenient (simple)
lemma.

\vs

\textbf{Lemma:} $\lim_{x\to a}f(x)$ is equivalent to $\lim_{h\to
  0}f(a+h)$.

\textbf{Proof.} Let $x=a+h$. Then
\begin{align*}
  &\lim_{h\to0}f(a+h)\\
  &\iff\lim_{x-a\to0}f(x)\\
  &\iff\lim_{x\to a}f(x)
\end{align*}

Note that the last implication is true because
\[0<|(x-a)-0|<\delta\iff 0<|x-a|<\delta\]
QED.

\vs

\textbf{Theorem:} if $f$ is differentiable at $a$, then $f$ is
continuous at $a$.

\textbf{Proof.} We must show that:
\[\lim_{x\to a}f(x)=f(a)\]

We begin as follows:
\begin{align*}
  \lim_{h\to0}[f(a+h)-f(a)]&=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}\cdot h\\
                         &=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}\cdot \lim_{h\to
                           0}h\\
                         &=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}\cdot 0\\
                         &=0
\end{align*}

It follows that
\begin{align*}
  &\lim_{h\to0}[f(a+h)-f(a)]=0\\
  &\implies \lim_{h\to0}f(a+h)-\lim_{h\to0}f(a)=0\\
  &\implies \lim_{h\to0}f(a+h)=\lim_{h\to0}f(a)=f(a)
\end{align*}

\subsection{Low-level proofs}

In the next chapter we prove theorems that make finding derivatives
for many classes of functions easy. But for now we show four low-level
derivations directly from the definition. Here we will be looking at
constant functions, linear functions, quadratic, and cubic functions.

\subsubsection*{Constant functions}
Let $f(x)=c$. Then:
\[f'(a)=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}=\lim_{h\to0}\frac{c-c}{h}=0\]

Thus $f$ is differentiable at $a$ for every number $a$, and $f'(a)=0$.

\subsubsection*{Linear functions}
Let $f(x)=cx+d$. Then:
\begin{align*}
  f'(a)&=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}\\
       &=\lim_{h\to0}\frac{c(a+h)+d-(ca+d)}{h}\\
       &=\lim_{h\to0}\frac{ch}{h}=c
\end{align*}

Thus $f$ is differentiable at $a$ for every number $a$, and $f'(a)=c$.

\subsubsection*{Quadratic functions}
Let $f(x)=x^2$. Then:
\begin{align*}
  f'(a)&=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}\\
       &=\lim_{h\to0}\frac{(a+h)^2-a^2}{h}\\
       &=\lim_{h\to0}\frac{a^2+2ah+h^2-a^2}{h}\\
       &=\lim_{h\to0}\frac{2ah+h^2}{h}\\
       &=\lim_{h\to0}2a+h\\
       &=\lim_{h\to0}2a
\end{align*}

Thus $f$ is differentiable at $a$ for every number $a$, and $f'(a)=2a$.

\subsubsection*{Cubic functions}
Let $f(x)=x^3$. Then:
\begin{align*}
  f'(a)&=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}\\
       &=\lim_{h\to0}\frac{(a+h)^3-a^3}{h}\\
       &=\lim_{h\to0}\frac{a^3+3a^2h+3ah^2+h^3-a^3}{h}\\
       &=\lim_{h\to0}\frac{3a^2h+3ah^2+h^3}{h}\\
       &=\lim_{h\to0}3a^2+3ah+h^2\\
       &=3a^2
\end{align*}

Thus $f$ is differentiable at $a$ for every number $a$, and $f'(a)=3a^2$.

\subsection{Non-differentiability}
Continuous functions are ``nice''. Functions that are differentiable
everywhere are ``nicer''. Functions that are differentiable everywhere
and whose first derivative is differentiable everywhere are nicer
still. Thus to fully understand the derivative we must understand
examples where it does not exist.

\vs

We now turn our attention to functions that aren't differentiable at
some points $a$. We first look at four simple examples where there
isn't everywhere a first derivative. We then turn our attention to a
more subtle example-- a function that's differentiable in the first,
but not everywhere in the second derivative.

\subsubsection*{First derivative}

\textbf{Example 1}

Let $f(x)=|x|$. Consider $f'(0)$:
\[f'(0)=\lim_{h\to0}\frac{f(0+h)-f(0)}{h}=\lim_{h\to0}\frac{|h|}{h}\]

Observe that $\lim_{h\to0^+}\frac{|h|}{h}=1$ and
$\lim_{h\to0^-}\frac{|h|}{h}=-1$. This $\lim_{h\to0}\frac{|h|}{h}$ does
not exist, and $f$ is not differentiable at $0$. Note that $f$ is
differentiable at every other point: $f'(a)=-1$ for $a<0$ and
$f'(a)=-1$ for $a>0$.

\vs

\textbf{Example 2}

Let $f$ be defined as follows:
\[f(x)=\begin{cases}
  x^2,&x\leq 0\\
  x,&x\geq 0
\end{cases}\]

Now consider $f'(0)$:
\[f'(0)=\lim_{h\to0}\frac{f(0+h)-f(0)}{h}=\lim_{h\to0}\frac{f(h)}{h}\]

Observe that
\[\frac{f(h)}{h}=\begin{cases}
  \frac{h^2}{h}=h,&h\leq0\\
  \frac{h}{h}=1,&h\geq0
\end{cases}\]

Therefore $\lim_{h\to0^-}\frac{f(h)}{h}=0$ and
$\lim_{h\to0^+}\frac{f(h)}{h}=1$. Thus $\lim_{h\to0}\frac{f(h)}{h}$ does
not exist, and $f$ is not differentiable at $0$.

\vs

\textbf{Example 3}

Let $f(x)=\sqrt{|x|}$. Consider $f'(0)$:
\[f'(0)=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}=\lim_{h\to0}\frac{\sqrt{|h|}}{h}\]

Observe that
\[\frac{\sqrt{|h|}}{h}=\begin{cases}
  \frac{\sqrt{-h}}{h}=-\frac{1}{\sqrt{-h}},&h<0\\
  \frac{\sqrt{h}}{h}=\frac{1}{\sqrt{h}},&h>0
\end{cases}\]

Therefore $\lim_{h\to0^+}\frac{\sqrt{|h|}}{h}=\infty$ and
$\lim_{h\to0^-}\frac{\sqrt{|h|}}{h}=-\infty$. Thus
$\lim_{h\to0}\frac{\sqrt{|h|}}{h}$ does not exist, and $f$ is not
differentiable at $0$.

\vs

\textbf{Example 4}

Let $f(x)=\sqrt[3]{x}$. Here $\frac{\sqrt[3]{h}}{h}$ plays out as
follows:
\[\frac{\sqrt[3]{h}}{h}=\frac{h^{1/3}}{h}=\frac{1}{h^{2/3}}=\frac{1}{{(\sqrt[3]{h})}^2}\]

This expression becomes arbitrarily large as $h$ goes to $0$, i.e.
$\lim_{h\to0}\frac{1}{{(\sqrt[3]{h})}^2}=\infty$. Thus $f$ is not
differentiable at zero (or put differently, the tagent line to $f$ at
$0$ is vertical).


\subsubsection*{Second derivative}
We now come to our more subtle example-- a function that's
differentiable in the first but not everywhere in the second
derivative:

\vs

\textbf{Example 1}

Let
\[f(x)=\begin{cases}
  x^2,&x\geq0\\
  -x^2,&x\leq0
\end{cases}\]

As we've seen in the quadratic functions example above,
$\frac{dx^2}{dx}=2x$. By very similar logic, $\frac{d(-x^2)}{dx}=-2x$.
Thus $f'(a)=2a$ if $a\geq0$, and $f'(a)=-2a$ if $a\leq0$. Or, put
differently, $f'(x)=2|x|$.

\vs

So, $f'(0)=0$. But what about $f''(0)$? We've already seen that
$g(x)=|x|$ is not differentiable, and by very similar logical,
$f''(0)$ does not exist! So even a ``smooth looking'' function may not
have a second derivative-- a fact that implies existence of a second
derivative is a strong critereon for a function to satisfy.

\subsection{Tangent lines}
Spivak now handles a question---- how many times does a tagent line to
$f$ at $a$ intersect the graph of $f$? He doesn't yet motivate the
question, though I suspect he will at a later time (at which point I
will come back and make a note of it here). To answer this question we
must first find the linear equation that describes the tagent line,
which we will now do. We'll then address the question of intersection
for quadratic and cubic functions.

\subsubsection*{Point-slope form}
The slope $m$ of a line is determined by
\[m=\frac{y-y_1}{x-x_1}\]

For a function $f$ differentiable at $a$, the slope of a tagent line
at $a$ is $m=f'(a)$. We also know one of the points on the line--
$(a, f(a))$ (the point where the tangent line intersects with $f$).
Plugging that in we get
\begin{align*}
  &f'(a)=\frac{y-f(a)}{x-a}\\
  &\implies y-f(a)=f'(a)(x-a)\\
  &\implies y=f'(a)(x-a)+f(a)
\end{align*}

This gives us a linear equation for the tangent line-- a \textit{linear
  approximation} of $f$ near $a$.

\subsubsection*{Intersections}

\textbf{Quadratic functions.} For $f(x)=x^2$ we've seen that
$f'(a)=2a$. Plugging that into $y=f'(a)(x-a)+f(a)$ we get:
\begin{align*}
  y&=2a(x-a)+a^2\\
   &=2ax-a^2
\end{align*}

Let $g(x)=2ax-a^2$. We can now solve for all $x$ such that
$f(x)=g(x)$:
\begin{align*}
  &f(x)=g(x)\\
  &\implies x^2=2ax-a^2\\
  &\implies x^2-2ax+a^2=0\\
  &\implies (x-a)^2=0\\
  &\implies x=a
\end{align*}

So the only solution is $x=a$, therefore the only point of
intersection is $(a, f(a)=g(a)=a^2$).

\vs

\textbf{Cubic functions.} For $f(x)=x^3$ we've seen that
$f'(a)=3a^2$. Plugging that into $y=f'(a)(x-a)+f(a)$ we get:
\begin{align*}
  y&=3a^2(x-a)+a^3\\
   &=3a^2x-2a^3
\end{align*}

Let $g(x)=3a^2x-2a^3$. We can now solve for all $x$ such that
$f(x)=g(x)$:
\begin{align*}
  &f(x)=g(x)\\
  &x^3=3a^2x-2a^3\\
  &x^3-3a^2x+2a^3=0
\end{align*}

Factoring this in Mathematica, we get
\[(a-x)^2(2a+x)=0\]

Thus one of the solutions is $x=a$ (we already knew $(a, a^3)$ is a
point of intersection-- we explicitly constructed the tangent line at
this point). The other solution is $x=-2a$, and thus the other point
of intersection is $(-2a, -8a^3)$.

%%% Local Variables:
%%% TeX-master: "notes"
%%% End:
