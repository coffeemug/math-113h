
\section{Derivatives, Part IIIa (Consequences)}

I reordered some content from Spivak's chapter for clarity, but kept
theorem and corollary numbering scheme. Thus theorem numbers here
aren't in order (but they match the numbers in Spivak).

\subsection{Maxima and manima}
We start with some definitions. Let $f$ be a function and $A$ a set of
numbers contained in $f$'s domain.\footnote{$A$ need not have any
  additional properties. E.g. it may have holes, etc.} Then:

\vs

\textbf{Definition.} A point $x$ in $A$ is a \textbf{maximum
  point} for $f$ on $A$ if
\[f(x)\geq f(y)\qquad\text{for every $y$ in $A$}\]

\textbf{Definition.} A \textbf{critical point} of $f$ is a number $x$
such that $f'(x)=0$.\footnote{If $x$ is a maximum and/or critical
  point, then $f(x)$ is called a maximum and/or critical value of
  $f$.}

\vs---\vs

\textbf{Theorem 1a.} Let $f$ be any function defined on $(a,b)$. If $x$
is a maximum point for $f$ on $(a,b)$, and $f$ is differentiable at
$x$, then $f'(x)=0$.

\vs

\textit{Intuitively,} maximum and minimum points are also critical
points (but \textbf{not} the other way around-- $f(x)=x^3$ has
$f'(0)=0$ as an obvious counterexample\footnote{In this case this
  critical point is called the \textbf{saddle point}.}).

\vs

\textbf{Proof.} \textit{Informally}, suppose $a$ is a maximum point.
Draw a secant line between $a$ and $a_l$ (to its left), and another
line between $a$ and $a_r$ (to its right). The $a-a_l$ line will slope
up, the $a-a_r$ line will slope down. Thus at $a$ the slope crosses
from positive to negative, and is $0$.

\vs

\textit{Formally}, let $h\in\mathcal{R}$ such that $x+h\in(a,b)$. If $h<0$ it follows that:
\begin{align*}
  &f(x+h)\leq f(x)&\text{since $f(x)$ is a maximum value}\\
  &\implies f(x+h)-f(x)\leq 0\\
  &\implies\frac{f(x+h)-f(x)}{h}\geq0&\text{dividing by negative $h$}\\
  &\implies \lim_{h\to0^-}\frac{f(x+h)-f(x)}{h}\geq0&\text{see
                                                 \ref{subsec:onesided-limits}
                                                 and
                                                 \ref{subsubsec:nonzero-lemma}}
\end{align*}

Conversely, if $h>0$ it follows that:
\begin{align*}
  &\implies \frac{f(x+h)-f(x)}{h}\leq0&\text{dividing by positive $h$}\\
  &\implies \lim_{h\to0^+}\frac{f(x+h)-f(x)}{h}\leq0
\end{align*}

By hypothesis, $f$ is differentiable at $x$. Thus the two limits must
be equal to each other, and to $f'(x)$. Therefore $f'(x)\geq0$ and
$f'(x)\leq0$. Thus $f'(x)=0$ as desired.

\vs

\textbf{Theorem 1b.} Let $f$ be any function defined on $(a,b)$. If
$x$ is a \textit{minimum} point for $f$ on $(a,b)$, and $f$ is
differentiable at $x$, then $f'(x)=0$.

\vs

\textbf{Proof.} Let $g=-f$. Then $x$ is a maximum point of $g$. By 1a,
$g'(x)=0$, thus $(-f)'(x)=-1\cdot f'(x)=0$, and thus $f'(x)=0$ as desired.

\vs---\vs

The obvious (extremely valuable) consequences of these theorems is
that we can find minimum and maximum values of $f$ by solving for
$f'(x)=0$.

\subsection{Mean Value Theorem}

\textbf{Theorem 3 (Rolle's theorem).} Let $f$ be continuous on $[a,b]$
differentiable on $(a,b)$, and let $f(a)=f(b)$. Then there exists
$x\in(a,b)$ such that $f'(x)=0$.

\vs

\textbf{Proof.} There are two cases:
\begin{itemize}
\item \textit{Case 1.} Suppose the maximum or the minimum occurs at a
  point $x\in(a,b)$. Then $f'(x)=0$ by theorem 1, and we are done.
\item \textit{Case 2.} Suppose the maximum and the minimum both occur
  at endpoints. Since $f(a)=f(b)$, the maximum and the minimum values
  are equal and $f$ is constant. Then for any $x\in(a,b), f'(x)=0$ and
  we are done.
\end{itemize}

\textbf{Theorem 4 (Mean value theorem).}

Let $f$ be continuous on $[a,b]$ and differentiable on $(a,b)$. Then
there exists $x\in(a,b)$ such that:
\[f'(x)=\frac{f(b)-f(a)}{b-a}\]

Here are three intuitions:
\begin{enumerate}
\item \textit{Geometric intuition.} There exists a line tangent to $f$
  parallel to the line between the endpoints (i.e. line between
  $(a, f(a))$ and $(b, f(b))$).
\item \textit{Algebraic intuition.} There exists a point $x$ at which
  instantaneous rate of change of $f$ is equal to the average change
  of $f$ on $[a,b]$.
\item \textit{Physical example.} If you travel 60 miles in one hour,
  at some point you must have been travelling exactly 60 miles per
  hour.
\end{enumerate}

\textbf{Proof.}

Here's an informal proof outline:
\begin{itemize}
\item Take the line segment formed by endpoints $(a,f(a))$ and
  $(b,f(b))$.
\item Construct a function $g$ that for $x\in(a,b)$ returns the vertical
  distance between $f(x)$ and the line segment. (We'll show it's
  continuous and differentiable.)\footnote{It turns out not to matter
    whether $g$ computes the distance between $f$ and the line
    segment, or $f$ and the line segment shifted down by $f(a)$ (i.e.
    down to $x$-axis). So in practice we use the lattern form to avoid
    dealing with the $f(a)$ term in the linear equation.}
\item By Rolle's theorem, it has a flat tangent. It's easy to show
  algebraically (and visualize geometrically) this proves the MVT.
\end{itemize}

Formally, let\footnote{See \ref{subsubsec-point-slope-form} for how
  the point-slope form is used to construct the second term.}
\[h(x)=f(x)-\left[\frac{f(b)-f(a)}{b-a}(x-a)\right]\]

Observe $h$ is continuous on $[a,b]$ and differentiable on $(a,b)$.
Further:
\begin{align*}
  h(a)&=f(a)-\left[\frac{f(b)-f(a)}{b-a}\cdot0\right]=f(a)\\
  h(b)&=f(b)-\left[\frac{f(b)-f(a)}{b-a}(b-a)\right]\\
      &=f(b)-[f(b)-f(a)]\\
      &=f(a)
\end{align*}

Thus we can apply Rolle's Theorem $h$ to conclude there is $x\in(a,b)$
such that:\footnote{Note the derivative of a line is its slope, thus
  $\frac{d}{dx}\left[\frac{f(b)-f(a)}{b-a}(x-a)\right]=\frac{f(b)-f(a)}{b-a}$.}

\begin{align*}
  &0=h'(x)=f'(x)-\frac{f(b)-f(a)}{b-a}\\
  &\implies f'(x)=\frac{f(b)-f(a)}{b-a}
\end{align*}

QED.


\subsection{MVT consequences}
\textbf{Corollary 1.} If $f$ is defined on an interval and $f'(x)=0$
for all $x$ in the interval, then $f$ is constant on the interval.

\vs

\textit{Intuitively,} if the velocity of a particle is always zero,
the particle must be standing still.

\vs

\textbf{Proof.} Let $a\neq b$ be any two points on the interval. Then
there is $x\in(a,b)$ such that $f'(x)=\frac{f(b)-f(a)}{b-a}$. But
$f'(x)=0$ for all $x$ on the interval, thus $0=\frac{f(b)-f(a)}{b-a}$.
Thuf $f(a)=f(b)$ for any $a,b$ (i.e. $f$ is constant on the interval
as desired).

\vs---\vs

\textbf{Corollary 2.} If $f,g$ are defined on the same interval, and
$f'(x)=g'(x)$ for all $x$ in the interval, then there is
$c\in\mathcal{R}$ such that $f=g+c$.

\vs

\textbf{Proof.} Observe that
\begin{align*}
  &f'(x)=g'(x)\\
  &\implies f'(x)-g'(x)=0\\
  &(f-g)'(x)=0
\end{align*}

By corollary 1, $(f-g)$ is constant, i.e. $f=g+c$ as desired.

\vs---\vs

\textbf{Definition.} A function is \textbf{increasing} on an interval
if $f(a)<f(b)$ whenever $a,b$ are two numbers in the interval with
$a<b$.\footnote{The decreasing function definition is obvious.}

\vs

\textbf{Corollary 3a.} If $f'(x)>0$ for all $x$ on an interval, then
$f$ is increasing on the interval.

\vs

\textbf{Proof.} Let $a<b$ be two points on an interval. Then there
exists $x\in(a,b)$ such that
\[f'(x)=\frac{f(b)-f(a)}{b-a}\]

But $f'(x)>0$ for all $x\in(a,b)$, thus
\[\frac{f(b)-f(a)}{b-a}>0\]

We know $b-a>0$, thus $f(b)>f(a)$ as desired.

\vs---\vs

\textbf{Corollary 3b.} If $f'(x)<0$ for all $x$ on an interval, then
$f$ is decreasing on the interval.

\vs

\textbf{Proof.} The proof is an obvious modification of 3a.

\vs---\vs

\textbf{Theorem 7.} Suppose (1) $f$ is continuous at $a$, (2) $f'(x)$
exists for all $x$ in $0<|x-a|<\delta$, and (3) $\lim_{x\to a}f'(x)$ exists.
Then $f'(a)$ exists and
\[f'(a)=\lim_{x\to a}f'(x)\]

\textit{Intuitively,} derivatives cannot have holes. Put differently,
$f'$ \textit{can} be discontinuous at $a$ by fluctuating wildly near
$a$\footnote{In \ref{subsec-sine-poly} we've already seen an example
  of this:
  \[f(x)=\begin{cases}
    x^2\sin \frac{1}{x},&x\neq0\\
    0,&x=0.
  \end{cases}\]}, but
not by being undefined at $a$, or by being defined at $a$ to be far from its limit
near $a$.

\vs

\textbf{Proof.} Informally, for ``nice'' functions like $f$, the mean
value theorem applies on tiny scales of $\delta-\epsilon$ limits.

\vs

By derivative definition
\[f'(a)=\lim_{h\to 0}\frac{f(a+h)-f(a)}{h}\]

For sufficiently small $h$, both positive and negative, by supposition:
\begin{itemize}
\item $f$ will be continuous on $[a,a+h]$
\item $f$ will be differentiable on $(a,a+h)$
\end{itemize}

These conditions are sufficient for the mean value theorem, and thus
there exists $\alpha_h\in(a, a+h)$ such that:
\[\frac{f(a+h)-f(a)}{h}=f'(\alpha_h)\]

Putting this together:\footnote{Spivak observes the last equation in
  the proof is handwavy and needs a proper $\delta-\epsilon$ proof. I need to move
  on, so leaving this as a TODO.}
\begin{align*}
  f'(a)&=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}&\text{by derivative definition}\\
       &=\lim_{h\to0}f'(\alpha_h)&\text{by mean value theorem}\\
       &=\lim_{x\to a}f'(x)&\text{$\alpha_h\in(a,a+h)$, thus as $h\to0$, $\alpha_h\to a$}
\end{align*}

\subsection{Local maxima and manima}
\textbf{Definition.} A point $x$ in $A$ is a \textbf{local maximum
  point} for $f$ on $A$ if there is some $\delta>0$ such that $x$ is a
maximum point for $f$ on $A\cap(x-\delta, x+\delta)$.

\vs

\textbf{Theorem 2.} If $f$ is defined on $(a,b)$ and has a local
maximum (or minimum) at $x$, and $f$ is differentiable at $x$, then
$f'(x)=0$.

\vs

\textbf{Proof.} The proof is a trivial application of theorem 1 to $f$
on $(x-\delta, x+\delta)$.

\subsection{Graph sketching}

\subsection{L'H\^opital's rule}



%%% Local Variables:
%%% TeX-master: "notes"
%%% End:
