
\section{Derivatives, Part II (Differentiation)}

\subsection{Basic proofs}

We now prove theorems that make differentiation of a large class of
functions easy.

\vs

\textbf{Theorem 1.} If $f(x)=c$ then $f'(a)=0$ for all $a$.

\vs

\textit{Intuitively} derivatives measure the rate of change. A
constant function doesn't change, thus the derivative is zero.

\vs

\textbf{Proof:} we already proved this in the previous chapter.

\vs---\vs

\textbf{Theorem 2.} If $f(x)=x$ then $f'(a)=1$ for all $a$.

\vs

\textit{Intuitively} $f(x)$ grows at exactly the same rate as $x$,
thus the derivative is $1$.

\vs

\textbf{Proof:}
\[f'(a)=\lim_{h\to0}\frac{f(a+h)-f(a)}{h}=\lim_{h\to0}\frac{a+h-a}{h}=1\]

\vs---\vs

\textbf{Theorem 3.} If $f,g$ are differentiable at $a$, then
$(f+g)'(a)=f'(a)+g'(a)$.

\vs
\textit{Examples:}
\begin{itemize}
\item You have two functions, each modeling growth of some bank
  account. You want to understand the rate of growth of both accounts.
\item You have two different assembly lines producing the same
  product. $c_1(x)$ and $c_2(x)$ model the cost of producing $x$
  units on each assembly line. You want to understand total cost
  changes as production across both assembly lines increases.
\end{itemize}

\textbf{Proof:}
\begin{align*}
  (f+g)'(a)&=\lim_{h\to0}\frac{(f+g)(a+h)-(f+g)(a)}{h}\\
           &=\lim_{h\to0}\frac{f(a+h)+g(a+h)-f(a)-g(a)}{h}\\
           &=\lim_{h\to0}\frac{f(a+h)-f(a)}{h} +
             \lim_{h\to0}\frac{g(a+h)-g(a)}{h}\\
           &=f'(a)+g'(a)
\end{align*}

---\vs

\textbf{Theorem 4.} If $f,g$ are differentiable at $a$, then
\[(f\cdot g)'(a)=f'(a)\cdot g(a)+f(a)\cdot g'(a)\]

\vs

\textit{Examples:}
\begin{itemize}
\item Let $r_1(t), r_2(t)$ model the length of each side of a
  rectangle over time. You want to understand the change in area at
  time $t$.
\end{itemize}

\textbf{Proof:}
\begin{align*}
(f\cdot g)'(a)=&=\lim_{h\to0}\frac{(f\cdot g)(a+h)-(f\cdot g)(a)}{h}\\
           &=\lim_{h\to0}\frac{f(a+h)g(a+h)-f(a)g(a)}{h}\\
           &=\lim_{h\to0}\frac{f(a+h)g(a+h)-f(a)g(a) + f(a+h)g(a)-f(a+h)g(a)}{h}\\
           &=\lim_{h\to0}\frac{f(a+h)(g(a+h)-g(a)) + g(a)(f(a+h) - f(a))}{h}\\
           &=\lim_{h\to0}\left(f(a+h)\frac{g(a+h)-g(a)}{h}+g(a)\frac{f(a+h)-f(a)}{h}\right)\\
           &=\lim_{h\to0}f(a+h)\cdot\lim_{h\to0}\frac{g(a+h)-g(a)}{h}+\lim_{h\to0}g(a)\cdot\lim_{h\to0}\frac{f(a+h)-f(a)}{h}\\
           &=\lim_{h\to0}f(a+h)\cdot g'(a)+g(a)\cdot f'(a)
\end{align*}
Recall from \ref{diff-implies-cont} that if $f$ is differentiable at
$a$, then $\lim_{h\to0}f(a+h)=f(a)$. Thus
\[(f\cdot g)'(a)=f(a)\cdot g'(a)+g(a)\cdot f'(a)\]

---\vs

\textbf{Theorem 5.} If $g(x)=cf(x)$ then $g'(a)=c\cdot f'(a)$.

\vs

\textit{Examples:}
\begin{itemize}
\item Let $h$ be a height of a rectangle that's constant, and let
  $b(t)$ model the length of the base of a rectangle over time. You
  want to understand the change in area at time $t$.
\end{itemize}

\textbf{Proof:} Let $h(x)=c$ so $g=h\cdot f$. Then by theorem 4:
\begin{align*}
  g'(x)&=h'(x)f(x)+f'(x)g(x)\\
       &=0\cdot f(x)+cf'(x)\\
       &=cf'(x)
\end{align*}

---\vs

\textbf{Theorem 6.} If $f(x)=x^n$ for $n\in\mathcal{N}$, then $f'(a)=na^{n-1}$ for
all $a$.

\vs

\textit{Examples:}
\begin{itemize}
\item Let $s(t)$ model the length of the side of a cube over time. You
  want to understand the change in volume at time $t$.
\end{itemize}

\textbf{Proof.} We prove this by induction. For $n=1$, $f'(a)=1$ by
theorem 2.

\vs

Assume if $f(x)=x^n$ then $f'(a)=na^{n-1}$ for all $a$.

\vs

Let $I(x)=x$ and let $g(x)=x^{n+1}=xx^n$. Then $g(x)=I(x)\cdot f(x)$, i.e.
$g=I\cdot f$. By theorem 4:
\begin{align*}
  g'(a)&=(I\cdot f)'(a)\\
       &=I'(a)f(a)+I(a)f'(a)\\
       &=1\cdot a^n+a\cdot na^{n-1}\\
       &=a^n+na^n\\
       &=a^n(1+n)\\
       &=(n+1)a^n
\end{align*}

---\vs

\textbf{Theorem 7.} If $g$ is differentiable at $a$ and $g(a)\neq0$, then
\[\left(\frac{1}{g}\right)'(a)=\frac{-g'(a)}{{[g(a)]}^2}\]

\textit{Examples:}
\begin{itemize}
\item Let $i(d)=\frac{1}{d^2}$ model the intensity of light, which
  is inversely proportional to the square of the distance from the
  source. You want to know how intensity changes with distance.
\end{itemize}

\textbf{Proof.} We will prove this by using the derivative definition.
However, we must first show $\left(\frac{1}{g}\right)(a+h)$ is defined
for sufficiently small $h$. This is easy.

\vs

Since $g$ is differentiable at $a$ it is continuous at $a$. Thus by
nonzero neighborhood lemma (see \ref{subsubsec:nonzero-lemma}) there
exists $\delta>0$ such that $|h|<\delta$ implies $g(a+h)\neq0$ for all
$h$. Thus $\left(\frac{1}{g}\right)(a+h)$ is defined for sufficiently
small $h$.

\vs

We are now ready to prove the core of the theorem.
\begin{align*}
  \lim_{h\to0}\frac{\left(\frac{1}{g}\right)(a+h)-\left(\frac{1}{g}\right)(a)}{h}
  &=\lim_{h\to0}\left(\frac{1}{g(a+h)}-\frac{1}{g(a)}\right)/h\\
  &=\lim_{h\to0}\left(\frac{g(a)-g(a+h)}{g(a)\cdot g(a+h)}\right)/h\\
  &=\lim_{h\to0}\frac{g(a)-g(a+h)}{h\cdot g(a)\cdot g(a+h)}\\
  &=\lim_{h\to0}\frac{-[g(a+h)-g(a)]}{h}\cdot\frac{1}{g(a)\cdot g(a+h)}\\
  &=\lim_{h\to0}\frac{-[g(a+h)-g(a)]}{h}\cdot\lim_{h\to0}\frac{1}{g(a)\cdot
    g(a+h)}
\end{align*}

Recall from \ref{diff-implies-cont} that if $f$ is differentiable at
$a$, then $\lim_{h\to0}f(a+h)=f(a)$. Thus:
\begin{align*}
  \lim_{h\to0}\frac{-[g(a+h)-g(a)]}{h}\cdot\lim_{h\to0}\frac{1}{g(a)\cdot g(a+h)}
  &=-g'(a)\cdot \frac{1}{[g(a)]^2}
\end{align*}

as desired.

\vs---\vs

\textbf{Theorem 8.} If $f, g$ are differentiable at $a$ and $g(a)\neq0$, then
\[\left(\frac{f}{g}\right)'(a)=\frac{g(a)\cdot f'(a)-f(a)\cdot g'(a)}{[g(a)]^2}\]

\vs

\textit{Examples:}
\begin{itemize}
\item Let $e(t), s(t)$ model the number of engineers and sales people
  at a company over time. You want to understand the change in the
  ratio between the two.
\end{itemize}

\textbf{Proof.}
\begin{align*}
  \left(\frac{f}{g}\right)'(a)&=\left(f\cdot\frac{1}{g}\right)'(a)\\
  &=f(a)\cdot
    \left(\frac{1}{g}\right)'(a)+f'(a)\cdot\left(\frac{1}{g}\right)(a)\\
  &=\frac{-g'(a)\cdot f(a)}{[g(a)]^2}+\frac{f'(a)}{g(a)}\\
  &=\frac{-g'(a)\cdot f(a)\cdot g(a)+f'(a)\cdot [g(a)]^2}{[g(a)]^3}\\
  &=\frac{f'(a)\cdot g(a)-g'(a)\cdot f(a)}{[g(a)]^2}\\
\end{align*}

\subsection{Chain rule}
The derivative of composed functions is considerably more complicated,
and so deserves its own section. We'll prove this in two stages.
First, we'll attempt a proof with a few false starts that will point
us in the direction of a real proof. Once the direction becomes clear,
we'll abandon our first draft and write a clean proof from scratch.

\vs

\textbf{Theorem 9 (the chain rule).} If $g$ is differentiable at $a$,
and $f$ is differentiable at $g(a)$, then
\[(f\circ g)'(a)=f'(g(a))\cdot g'(a)\]

\textit{Examples:}
\begin{itemize}
\item Let $a(t)$ model altitude of a rocket over time, and let $p(a)$
  model air pressure at a particular altitude. You want to know how
  air pressure changes over time.
\end{itemize}

\textbf{Proof, first draft.}

As usual, we start with the definition of the derivative:
\begin{align*}
  (f\circ g)'(a)&=\lim_{h\to0}\frac{(f\circ g)(a+h)-(f\circ g)(a)}{h}\\
            &=\lim_{h\to0}\frac{f(g(a+h))-f(g(a))}{h}\\
            &=\lim_{h\to0}\left(\frac{f(g(a+h))-f(g(a))}{g(a+h)-g(a)}\cdot\frac{g(a+h)-g(a)}{h}\right)\\
            &=\lim_{h\to0}\frac{f(g(a+h))-f(g(a))}{g(a+h)-g(a)}\cdot\lim_{h\to0}\frac{g(a+h)-g(a)}{h}\\
            &=\left(\lim_{h\to0}\frac{f(g(a+h))-f(g(a))}{g(a+h)-g(a)}\right)\cdot g'(a)
\end{align*}

This is a bit of a false start as we now have two problems:
\begin{itemize}
\item To get $f'(g(a))$ in the first term, we need
  $\lim_{h\to0}\frac{f(g(a)+h)-f(g(a))}{h}$, but instead we have
  $\lim_{h\to0}\frac{f(g(a+h))-f(g(a))}{g(a+h)-g(a)}$.
\item $g(a+h)-g(a)$ may be zero for $h\neq 0$, so the division may be
  illegal.
\end{itemize}

However it isn't a total waste. Our false start gives us an idea for
how we may proceed-- we'll replace
$\frac{f(g(a+h))-f(g(a))}{g(a+h)-g(a)}$ with something
better. What could be the replacement? Let's hypothesize existance of
a function $\phi(h)$ with the following property (we will soon prove such
a function exists):

\[\frac{f(g(a+h))-f(g(a))}{h}=\phi(h)\cdot\frac{g(a+h)-g(a)}{h}\]

We can then rewrite our initial equations as follows:
\begin{align*}
  (f\circ g)'(a)&=\lim_{h\to0}\frac{(f\circ g)(a+h)-(f\circ g)(a)}{h}\\
            &=\lim_{h\to0}\frac{f(g(a+h))-f(g(a))}{h}\\
            &=\lim_{h\to0}\left(\phi(h)\cdot\frac{g(a+h)-g(a)}{h}\right)\\
            &=\lim_{h\to0}\phi(h)\cdot\lim_{h\to0}\frac{g(a+h)-g(a)}{h}\\
            &=\lim_{h\to0}\phi(h)\cdot g'(a)
\end{align*}

To get to $(f\circ g)'(a)=f'(g(a))\cdot g'(a)$ we need $\phi(h)$ to possess one
more property:
\[\lim_{h\to0}\phi(h)=f'(g(a))\]

Given this additional property, we can now finish our reasoning:
\[(f\circ g)'(a)=\lim_{h\to0}\phi(h)\cdot g'(a)=f'(g(a))\cdot g'(a)\]

Thus proving the chain rule reduces to proving there exists a function
$\phi(h)$ with the two properties above. For cleanliness, let's start a
new proof from scratch and demonstrate the existance of such a
function.

\vs

\textbf{Proof.}

Suppose there exists a function $\phi(h)$ with the
following properties:
\setcounter{equation}{0}
\begin{gather}
\frac{f(g(a+h))-f(g(a))}{h}=\phi(h)\cdot\frac{g(a+h)-g(a)}{h}\\
\lim_{h\to0}\phi(h)=f'(g(a))
\end{gather}

Then
\begin{align*}
  (f\circ g)'(a)&=\lim_{h\to0}\frac{(f\circ g)(a+h)-(f\circ g)(a)}{h}\\
            &=\lim_{h\to0}\frac{f(g(a+h))-f(g(a))}{h}\\
            &=\lim_{h\to0}\left(\phi(h)\cdot\frac{g(a+h)-g(a)}{h}\right)&\text{by
                                                                 property
                                                                 1}\\
            &=\lim_{h\to0}\phi(h)\cdot\lim_{h\to0}\frac{g(a+h)-g(a)}{h}\\
            &=\lim_{h\to0}f'(g(a))\cdot g'(a)&\text{by property 2}
\end{align*}

To complete the proof we must construct such a function and prove our
construction has properties 1 and 2. We will do so now. Define $\phi$ as
follows:
\begin{align*}
  \phi(h)=\begin{cases}
    \frac{f(g(a+h))-f(g(a))}{g(a+h)-g(a)} & \text{if } g(a+h)-g(a)\neq0 \\
    f'(g(a))  & \text{if } g(a+h)-g(a)=0
\end{cases}
\end{align*}

We will prove properties 1 and 2 hold for $\phi$.

\vs

\textbf{Property 1 proof.}

We now show
$\frac{f(g(a+h))-f(g(a))}{h}=\phi(h)\cdot\frac{g(a+h)-g(a)}{h}$. There are
two cases: either $g(a+h)-g(a)\neq0$ or $g(a+h)-g(a)=0$. Suppose
$g(a+h)-g(a)\neq0$. Then
\begin{align*}
  \phi(h)\cdot\frac{g(a+h)-g(a)}{h}&=\frac{f(g(a+h))-f(g(a))}{g(a+h)-g(a)}\cdot\frac{g(a+h)-g(a)}{h}\\
                            &=\frac{f(g(a+h))-f(g(a))}{h}
\end{align*}

Alternatively, suppose $g(a+h)-g(a)=0$. Then
\begin{align*}
  \phi(h)\cdot\frac{g(a+h)-g(a)}{h}&=f'(g(a))\cdot\frac{g(a+h)-g(a)}{h}\\
                            &=f'(g(a))\cdot\frac{0}{h}\\
                            &=0
\end{align*}

But $g(a+h)-g(a)=0$ means $g(a+h)=g(a)$, and thus
$\frac{f(g(a+h))-f(g(a))}{h}=0$. Thus in both cases property 1 holds,
as desired.

\vs

\textbf{Property 2 proof.}

We now show $\lim_{h\to0}\phi(h)=f'(g(a))$. Put differently:
\begin{itemize}
\item \textit{Intuitively}, we're trying to show that when $h$ is
  small, the top part of $\phi$ piecewise definition approaches the
  bottom part.
\item Here is another way to frame it. Observe that
  $\phi(0)=f'(g(a))$. Thus showing $\lim_{h\to0}\phi(h)=f'(g(a))$ is
  equivalent to showing $\lim_{h\to0}\phi(h)=\phi(0)$, i.e. that
  $\phi$ is continuous at $0$.
\item Formally, we must show that given $\epsilon>0$ there exists
  $\delta>0$ such that $|h|<\delta$ implies $|\phi(h)-f'(g(a))|<\epsilon$.
\end{itemize}

\vs

Since $f$ is differentiable at $g(a)$, by definition of the
derivative we have:
\[f'(g(a))=\lim_{k\to0}\frac{f(g(a)+k)-f(g(a))}{k}\]

Inlining the limit defition, for all $\epsilon>0$ there exists $\delta'>0$ such
that, for all $k$, if $0<|k|<\delta'$ then
\[\left|\frac{f(g(a)+k)-f(g(a))}{k}-f'(g(a))\right|<\epsilon\]

\subsection{Implications}
Theorems 1-5 imply:
\[(-f)'(a)=(-1\cdot f')(a)=-f'(a)\]
\begin{center}and\end{center}
\[(f-g)'(a)=(f+(-g))'(a)=f'(a)+(-g)'(a)=f'(a)-g'(a)\]

\subsection{Trig}

%%% Local Variables:
%%% TeX-master: "notes"
%%% End:
